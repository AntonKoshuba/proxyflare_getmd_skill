# Proxyflare GetMD Skill

Мощный инструмент для преобразования веб-страниц в чистый Markdown. Идеально подходит для подготовки контента для LLM, создания персональных баз знаний или архивации статей.

## Как это работает

Скрипт использует кастомный транспорт для httpx, который распределяет запросы через сеть ваших Cloudflare Workers (Proxyflare). Это позволяет:

1. Обходить блокировки (403 Forbidden, Cloudflare Turnstile и т.д.).

2. Извлекать только суть: библиотека trafilatura очищает страницу от рекламы, навигации и футеров.

3. Сохранять структуру: на выходе получается чистый Markdown с поддержкой таблиц.

## Быстрый старт

1. Установка

```bash
# Клонируйте репозиторий
git clone https://github.com/AntonKoshuba/proxyflare_getmd_skill.git
cd proxyflare_getmd_skill

# Установите зависимости
uv sync
```

2. Конфигурация

Для работы скрипта необходим файл `proxyflare-workers.json` в корневой директории. Если у вас уже развернуты воркеры через [Proxyflare](https://github.com/defernest/proxyflare), просто скопируйте конфиг:

```bash
cp ~/путь/к/вашему/proxyflare-workers.json .
```

Файл добавлен в `.gitignore` и не попадет в публичный доступ.

3. Настройка Alias (опционально)

Для удобного вызова из любой папки добавьте alias в ваш `.zshrc` или `.bashrc`:

```bash
alias getmd='uv run /путь/к/проекту/web_to_md.py'
```

## Использование

Вызывается через созданный alias:

```bash
getmd <URL>
```

Пример:

```bash
getmd https://
```

Расширенные параметры

Скрипт поддерживает аргументы командной строки:

- `-o`, `--output`: Путь к папке для сохранения (по умолчанию `./articles`).

- `-p`, `--proxy-config`: Путь к JSON-конфигу воркеров (по умолчанию `./proxyflare-workers.json`).

Пример:

```bash
getmd <URL> -o ~/Downloads/my_notes -p my_custom_config.json
```

## Особенности

- **Smart Slugify**: Автоматическое создание имен файлов на основе заголовка статьи (с поддержкой кириллицы).

- **No Overwrite**: Если файл с таким именем уже существует, скрипт добавит временную метку, чтобы не затереть данные.

- **User-Agent Rotation**: Имитация реального браузера для минимизации риска обнаружения.

- **SRP Architecture**: Код разбит на независимые модули (Fetch, Extract, Save), что упрощает интеграцию в другие проекты.
